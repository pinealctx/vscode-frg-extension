{
	"scopeName": "source.frg",
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#keywords"
		},
        {
            "include": "#info-block"
        },
        {
            "include": "#extern-block"
        },
		{
			"include": "#attributes"
		},
        {
            "include": "#handlers"
        },
        {
            "include": "#http-routes"
        },
		{
			"include": "#types"
		},
        {
            "include": "#struct-tags"
        },
        {
            "include": "#numbers"
        },
        {
            "include": "#operators"
        }
	],
	"repository": {
		"comments": {
			"patterns": [
				{
					"name": "comment.line.double-slash.frg",
					"match": "//.*$",
					"captures": {
						"0": {
							"patterns": [
								{
									"name": "entity.other.attribute-name.frg",
									"match": "\\b(summary|tags|deprecated|security|description|example|internal)\\b:"
								}
							]
						}
					}
				},
                {
                    "name": "comment.block.frg",
                    "begin": "/\\*",
                    "end": "\\*/"
                }
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.double.frg",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"name": "constant.character.escape.frg",
							"match": "\\\\."
						}
					]
				},
				{
					"name": "string.quoted.other.backtick.frg",
					"begin": "`",
					"end": "`"
				}
			]
		},
		"keywords": {
			"patterns": [
				{
					"name": "keyword.control.frg",
					"match": "\\b(syntax|info|import|type|enum|struct|service|returns)\\b"
				}
			]
		},
		"types": {
			"patterns": [
				{
					"name": "storage.type.frg",
					"match": "\\b(string|bool|int|int32|int64|float|float32|float64|double|map|array|any|interface\\{\\})\\b"
				},
                {
                    "name": "entity.name.type.frg",
                    "match": "\\b[A-Z][a-zA-Z0-9_]*\\b"
                }
			]
		},
		"attributes": {
			"patterns": [
                {
                    "begin": "(@attr)\\s*\\(",
                    "beginCaptures": {
                        "1": { "name": "entity.name.function.decorator.frg" }
                    },
                    "end": "\\)",
                    "patterns": [
                        { "include": "#strings" },
                        {
                            "name": "entity.other.attribute-name.frg",
                            "match": "\\b(group|auth|desc)\\b(?=\\s*:)"
                        }
                    ]
                },
                {
                    "name": "entity.name.function.decorator.frg",
                    "match": "@[a-zA-Z0-9_]+"
                }
			]
		},
        "info-block": {
            "begin": "\\b(info)\\s*\\(",
            "beginCaptures": {
                "1": { "name": "keyword.control.frg" }
            },
            "end": "\\)",
            "patterns": [
                { "include": "#strings" },
                {
                    "name": "entity.other.attribute-name.frg",
                    "match": "\\b(title|desc|gomod|version|author|email)\\b(?=\\s*:)"
                }
            ]
        },
        "extern-block": {
            "begin": "(@externDefs)\\s*\\{",
            "beginCaptures": {
                "1": { "name": "entity.name.function.decorator.frg" }
            },
            "end": "\\}",
            "patterns": [
                { "include": "#comments" },
                { "include": "#strings" },
                {
                    "name": "entity.other.attribute-name.frg",
                    "match": "\\b(name|swaggerType|importPath)\\b(?=\\s*:)"
                }
            ]
        },
        "handlers": {
            "match": "(@handler)\\s+([a-zA-Z0-9_]+)",
            "captures": {
                "1": { "name": "entity.name.function.decorator.frg" },
                "2": { "name": "entity.name.function.frg" }
            }
        },
        "http-routes": {
            "begin": "(get|post|put|delete|patch)\\s+([/a-zA-Z0-9_\\{\\}]+)",
            "beginCaptures": {
                "1": { "name": "keyword.control.http.frg" },
                "2": { "name": "string.unquoted.path.frg" }
            },
            "end": "(?=\\s*$|\\s*//)",
            "patterns": [
                {
                    "begin": "\\(",
                    "end": "\\)",
                    "name": "meta.function.parameters.frg",
                    "patterns": [
                        { "include": "#types" }
                    ]
                },
                {
                    "match": "\\breturns\\b",
                    "name": "keyword.control.frg"
                },
                {
                    "begin": "returns\\s*\\(",
                    "end": "\\)",
                    "name": "meta.function.return-type.frg",
                    "patterns": [
                        { "include": "#types" }
                    ]
                }
            ]
        },
        "struct-tags": {
            "name": "meta.tag.frg",
            "begin": "`",
            "end": "`",
            "patterns": [
                {
                    "name": "entity.other.attribute-name.frg",
                    "match": "\\b(json|header|validate|omgitempty|default|example|description)\\b:"
                },
                { "include": "#strings" }
            ]
        },
        "numbers": {
            "patterns": [
                {
                    "name": "constant.numeric.frg",
                    "match": "\\b\\d+\\b"
                },
                {
                    "name": "constant.numeric.frg",
                    "match": "\\b\\d+\\.\\d+\\b"
                }
            ]
        },
        "operators": {
            "patterns": [
                {
                    "name": "keyword.operator.frg",
                    "match": "=|\\*|\\[\\]|\\{|\\}|\\(|\\)|;|,|:"
                }
            ]
        }
	}
}
